'''
Задача 2. Чат
Реализуйте программу - чат, в котором могут участвовать сразу несколько человек, то
есть программа может работать одновременно для нескольких пользователей. При
запуске запрашивается имя пользователя. После этого он выбирает одно из действий:
1. Посмотреть текущий текст чата
2. Отправить сообщение (затем вводит сообщение) Действия запрашиваются
бесконечно.
Подсказка № 1
Используйте input() для получения имени пользователя и выбора действий, чтобы
обеспечить взаимодействие с пользователем, используйте функцию input() для
получения имени и выбора действия (просмотр сообщений или отправка сообщения).
Подсказка № 2
Для хранения сообщений используйте текстовый файл. Сохранение сообщений в
текстовом файле позволяет сохранить их между запусками программы и поддерживать
доступ для нескольких пользователей.
Подсказка № 3
Обрабатывайте исключение FileNotFoundError при чтении сообщений. Убедитесь, что
программа корректно обрабатывает отсутствие файла с сообщениями, чтобы избежать
аварийного завершения работы.
'''

import os

def get_username():
   return input("Введите ваше имя: ")

def display_chat():
   if not os.path.exists("chat.txt"):
      print("Чат пока пуст.")
      return

   with open("chat.txt", "r") as chat_file:
      messages = chat_file.readlines()
      if messages:
         print("Текущие сообщения в чате:")
      for message in messages:
         print(message.strip())
      else:
         print("Чат пока пуст.")

def send_message(username):
   message = input("Введите ваше сообщение: ")
   with open("chat.txt", "a") as chat_file:
      chat_file.write(f"{username}: {message}\n")
      print("Сообщение отправлено!")

def main():
   username = get_username()
   while True:
      print("\nВыберите действие:")
      print("1. Посмотреть текущий текст чата")
      print("2. Отправить сообщение")
      action = input("Ваш выбор (1 или 2): ")

      if action == "1":
         display_chat()
      elif action == "2":
         send_message(username)
      else:
         print("Неверный выбор. Пожалуйста, выберите 1 или 2.")

if __name__ == "__main__":
   main()


'''
Этот код включает:

1. Функцию get_username(), которая запрашивает имя пользователя.
2. Функцию display_chat(), которая отображает текущие сообщения в чате, если файл существует.
3. Функцию send_message(username), которая добавляет новое сообщение в файл чата.
4. Основную программу, которая бесконечно запрашивает действия у пользователя и выполняет соответствующие функции.
'''
